data <- read.table("household_power_consumption.txt", sep=";", col.names=c("Date", "Time", "Global_active_power", "Global_reactive_power", "Voltage", "Global_inten", "Sm1", "Sm2","Sm3"), na.strings="?",skip=66637,nrows=2880,colClasses=c("character", "character", "numeric", "numeric", "numeric", "numeric","numeric", "numeric","numeric"))
y<-paste(data$Date, data$Time)
z<-strptime(y, "%d/%m/%Y %H:%M:%S")
win.graph()
par(mfrow= c(2,2))
plot(z,data$Global_active_power, type="l", ylab="Global Active Power",xlab="")
plot(z,data$Voltage, type="l", ylab="Voltage",xlab="datetime")
plot(z,data$Sm1,"n", ylab="Energy sub metering", xlab="")
points(z,data$Sm1, type="l")
points(z,data$Sm2, type="l", col="red")
points(z,data$Sm3, type="l", col="blue")
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"), pch= "_", cex=.5,col=c("black","red","blue"))
plot(z,data$Global_reactive_power, type="l",ylab="Global_reactive_power",xlab="datetime")
dev.copy(png,file="plot4.png")
dev.off()